# CSRF 공격 예제

## 이론

### csrf란?
- csrf 공격은 사용자의 인증 정보를 활용해 악의적인 요청을 수행하는 공격 방식임.

### 방어 방식

1. CSRF 토큰 사용: 서버에서 각 사용자 세션에 대해 고유한 CSRF 토큰을 생성하고, 폼 제출이나 중요 요청 시 이 토큰을 함께 전송하도록 합니다. 서버는 요청 시 이 토큰을 검증해 요청이 정당한지를 확인합니다.

2. Referer 및 Origin 헤더 검사: 요청이 서버에 도달할 때 Referer 또는 Origin 헤더를 검사하여 해당 요청이 허용된 도메인에서 왔는지 확인할 수 있습니다. 그러나 이 방식은 헤더가 항상 포함되지 않을 수 있기 때문에 신뢰할 수 없는 방법입니다.

3. SameSite 쿠키 속성 설정: 쿠키에 SameSite 속성을 설정하여, 동일한 사이트에서 오는 요청에 대해서만 쿠키가 전송되도록 제한할 수 있습니다. 이를 통해 CSRF 공격을 완화할 수 있습니다.

4. CAPTCHA 사용: 민감한 요청을 처리하기 전에 CAPTCHA를 사용하여 요청자가 실제 사용자인지를 확인하는 방법도 있습니다.

5. GET 요청을 사용하지 않음: 중요한 데이터를 변경하거나 처리하는 요청에 GET 메소드를 사용하지 않고, POST, PUT, DELETE 등의 메소드를 사용하는 것이 좋습니다. GET 요청은 브라우저에서 쉽게 트리거될 수 있기 때문에 CSRF 공격에 더 취약합니다.


## 실습

- csrf 공격을 시뮬레이션 해 보겠음.
- csrf 토큰을 사용해서 csrf 공격 방어할 것임.
